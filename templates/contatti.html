<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contatti</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logosenzasfondo.png') }}">

  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
  </style>
</head>

<body>

  <div style="height: 140px; background-color: #5F7784;">
    {% include "navbar.html" %}
  </div>

  <div class="container">
    <div class="row">
      <div class="col p-5 fw-bold">
        <h3 class="mb-5">Fissa una consulenza</h3>
        <div class="d-flex align-items-center my-3">
          <i class="bi bi-telephone-fill me-2" style="color: #5F7784;"></i>
          <span>Dott. Alessandro Rigamonti: +39 349 286 5895</span>
        </div>
        <a href="mailto:alessandro@logopedistarigamonti.com" class="d-flex align-items-center my-3 text-decoration-none"
          style="cursor: pointer; color: inherit;">
          <i class="bi bi-envelope-fill me-2" style="color: #5F7784;"></i>
          <span>alessandro@logopedistarigamonti.com</span>
        </a>
        <a href="https://www.google.com/maps/search/?api=1&query=Via+Pitagora+5,+37138+Verona+VR" target="_blank"
          class="d-flex align-items-center my-3 text-decoration-none" style="cursor: pointer; color: inherit;">
          <i class="bi bi-geo-fill me-2" style="color: #5F7784;"></i>
          <span>Via Pitagora, 5, 37138 Verona VR</span>
        </a>
        <iframe width="500" height="300" style="border:0" loading="lazy" allowfullscreen
          src="https://www.google.com/maps?q=Via+Pitagora+5,+37138+Verona+VR&output=embed&t=k">
        </iframe>

      </div>
      <div class="col p-5 fw-bold">
        <h3 class="mb-5">Richiedi informazioni</h3>
        <form class="container mt-3" method="post" action="/new_request" id="requestForm">
          <div class="row mb-3">
            <div class="col">
              <label class="form-label">Nome</label>
              <input type="text" class="form-control rounded-pill" name="firstname">
            </div>
            <div class="col">
              <label class="form-label">Cognome</label>
              <input type="text" class="form-control rounded-pill" name="lastname">
            </div>
          </div>

          <div class="row mb-3">
            <div class="col">
              <label class="form-label">Email</label>
              <input type="email" class="form-control rounded-pill" name="email">
            </div>
            <div class="col">
              <label class="form-label">Cellulare</label>
              <input type="tel" class="form-control rounded-pill" name="phone">
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Seleziona uno o più servizi</label>
            <div class="row">
              <div class="col">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services" value="Logopedia">
                  <label class="form-check-label" for="opzione1">Logopedia</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services" value="Psicoterapia">
                  <label class="form-check-label" for="opzione2">Psicoterapia</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services"
                    value="Psicologia dell'età evolutiva / Tutor DSA">
                  <label class="form-check-label" for="opzione3">Psicologia dell'età evolutiva / Tutor DSA</label>
                </div>
              </div>
              <div class="col">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services" value="TNPEE">
                  <label class="form-check-label" for="opzione4">TNPEE</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services"
                    value="Osteopatia D.O. e Chinesiologia">
                  <label class="form-check-label" for="opzione5">Osteopatia D.O. e Chinesiologia</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="services" value="Massoterapia">
                  <label class="form-check-label" for="opzione6">Massoterapia</label>
                </div>
              </div>
            </div>
          </div>


          <div class="row mb-3">
            <div class="col">
              <label class="form-label">Messaggio</label>
              <textarea class="form-control rounded-3" rows="3" name="message"></textarea>
            </div>
          </div>


          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="consenso">
            <label class="form-check-label" for="consenso">
              Dichiaro di aver letto e compreso la politica sulla privacy e accetto i suoi termini e condizioni
            </label>
          </div>

          <button type="submit" class="btn text-white rounded-pill px-4 mt-3" style="background-color:#5F7784;">
            Invia
          </button>

        </form>


      </div>
    </div>
  </div>

  {% include "footer.html" %}
</body>
<script>
  document.getElementById('requestForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    const services = [];
    form.querySelectorAll('input[name="services"]:checked').forEach(cb => {
      services.push(cb.value);
    });

    const data = {
      firstname: formData.get('firstname'),
      lastname: formData.get('lastname'),
      email: formData.get('email'),
      phone: formData.get('phone'),
      message: formData.get('message'),
      services: services
    };

    const res = await fetch('/new_request', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await res.json();
    Swal.fire({
      icon: 'success',
      title: 'Richiesta inviata!',
      text: result.message,
      showConfirmButton: false,
      timer: 2000
    });
  });
</script>

</html>